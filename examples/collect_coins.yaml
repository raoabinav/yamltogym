# A simple coin collection environment
name: "Coin Collection"
grid_size: [8, 8]
max_steps: 100
observation_type: "grid"

# Starting position of the agent
agent_start:
  x: 0
  y: 0

# Objects in the environment
objects:
  - type: "wall"
    positions:
      - {x: 2, y: 1}
      - {x: 2, y: 2}
      - {x: 2, y: 3}
      - {x: 2, y: 4}
      - {x: 5, y: 4}
      - {x: 5, y: 5}
      - {x: 5, y: 6}
      - {x: 5, y: 7}
    properties:
      blocks_movement: true
  
  - type: "coin"
    positions:
      - {x: 1, y: 1}
      - {x: 6, y: 3}
      - {x: 3, y: 6}
      - {x: 7, y: 7}
    properties:
      reward: 1.0
      collectable: true
      terminate_on_collect: false
      # This coin will modify the player's score multiplier when collected
      modify_score_multiplier:player:add:0.1
  
  - type: "lava"
    positions:
      - {x: 4, y: 4}
      - {x: 3, y: 4}
      - {x: 4, y: 3}
    properties:
      damage: 1.0
      terminate_on_contact: true
      # Lava will reduce player's speed by 50% on contact
      modify_speed:player:multiply:0.5
  
  - type: "goal"
    positions:
      - {x: 7, y: 0}
    properties:
      reward: 10.0
      terminate_on_contact: true
      # Goal will double the final score
      modify_score_multiplier:player:multiply:2.0

# Available actions with flexible effects
actions:
  - name: "up"
    effect: 
      type: "move"
      params: {dx: 0, dy: -1}
  - name: "down"
    effect: 
      type: "move"
      params: {dx: 0, dy: 1}
  - name: "left"
    effect: 
      type: "move"
      params: {dx: -1, dy: 0}
  - name: "right"
    effect: 
      type: "move"
      params: {dx: 1, dy: 0}
  - name: "teleport_start"
    effect:
      type: "teleport"
      params: {x: 0, y: 0}
  - name: "double_speed"
    effect:
      type: "modify_property"
      params:
        object: "player"
        property: "speed"
        value: 2
        op: "multiply"
  - name: "heal"
    effect:
      type: "modify_property"
      params:
        object: "player"
        property: "health"
        value: 10
        op: "add"

# Reward rules (in addition to object-specific rewards)
rewards:
  - condition: "step_cost"
    value: -0.01

# Termination conditions (in addition to object-specific terminations)
terminations:
  - condition: "all_coins_collected"
    done: true
    success: true
  - condition: "max_steps_reached"
    done: true
    success: false
